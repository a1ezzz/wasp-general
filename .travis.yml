
language: python

matrix:
  include:

# Python 3.4 ignored due to lxml requirement of python >= 3.5 (lxml is a transitional requirement of webdavclient3)

    - name: "3.5 without checks"
      python: "3.5"
      env: WASP_ENABLE_CHECKS=

    - name: "3.6 without checks"
      python: "3.6"
      env: WASP_ENABLE_CHECKS=

    - name: "3.7 without checks"
      python: "3.7"
      env: WASP_ENABLE_CHECKS=
      dist: xenial

    - name: "3.8 without checks"
      python: "3.8"
      env: WASP_ENABLE_CHECKS=
      dist: xenial

    - name: "pypy3.5 without checks"
      python: "pypy3.5"
      env: WASP_ENABLE_CHECKS=
      dist: xenial

    - name: "3.5 all checks"
      python: "3.5"
      env: WASP_ENABLE_CHECKS=*

    - name: "3.6 all checks"
      python: "3.6"
      env: WASP_ENABLE_CHECKS=*

    - name: "3.7 all checks"
      python: "3.7"
      env: WASP_ENABLE_CHECKS=*
      dist: xenial

    - name: "3.8 all checks"
      python: "3.8"
      env: WASP_ENABLE_CHECKS=*
      dist: xenial

    - name: "pypy3.5 all checks"
      python: "pypy3.5"
      env: WASP_ENABLE_CHECKS=*
      dist: xenial

    - name: "3.5 strict, paranoid checks"
      python: "3.5"
      env: WASP_ENABLE_CHECKS=strict:paranoid

    - name: "3.6 strict, paranoid checks"
      python: "3.6"
      env: WASP_ENABLE_CHECKS=strict:paranoid

    - name: "3.7 strict, paranoid checks"
      python: "3.7"
      env: WASP_ENABLE_CHECKS=strict:paranoid
      dist: xenial

    - name: "3.8 strict, paranoid checks"
      python: "3.8"
      env: WASP_ENABLE_CHECKS=strict:paranoid
      dist: xenial

    - name: "pypy3.5 strict, paranoid checks"
      python: "pypy3.5"
      env: WASP_ENABLE_CHECKS=strict:paranoid
      dist: xenial

install:
  - pip install -r requirements.txt
  - pip install '.[dev,template,test]'

script:
  - cd tests
  - coverage run --source wasp_general -m py.test

after_script:
  - coveralls
