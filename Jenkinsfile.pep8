node {
	ansiColor('xterm') {
		stage('Preparing environment'){
			sh 'rm -rf ~/virtualenv-wasp-general-pep8/'
			sh 'virtualenv -p /usr/bin/python3 ~/virtualenv-wasp-general-pep8/'
		}

		stage('Installing package and requirements'){
			checkout scm
			sh '~/virtualenv-wasp-general-pep8/bin/pip install -r requirements.txt'
			sh '~/virtualenv-wasp-general-pep8/bin/pip install -r dev-requirements.txt'
			sh '~/virtualenv-wasp-general-pep8/bin/pip install .'
		}
	}
}
